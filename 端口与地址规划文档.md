# Mambo AI Platform - ç«¯å£ä¸åœ°å€è§„åˆ’æ–‡æ¡£

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†è®°å½•äº† Mambo AI Platform é¡¹ç›®ä¸­æ‰€æœ‰æœåŠ¡çš„ç«¯å£ä½¿ç”¨æƒ…å†µã€æ•°æ®åº“é…ç½®ä¿¡æ¯ä»¥åŠå‰åç«¯åœ°å€è§„åˆ’ï¼Œç¡®ä¿æœåŠ¡é—´çš„æ­£ç¡®é€šä¿¡å’Œéƒ¨ç½²é…ç½®ã€‚

---

## ğŸš€ æ ¸å¿ƒæœåŠ¡ç«¯å£è§„åˆ’

### åº”ç”¨ä¸»æœåŠ¡

| æœåŠ¡åç§° | ç«¯å£ | åè®® | ç”¨é€” | é…ç½®æ–‡ä»¶ |
|---------|------|------|------|----------|
| **Spring Boot åç«¯æœåŠ¡** | `8234` | HTTP | ä¸»åº”ç”¨æœåŠ¡å™¨ | `application.yml` |
| **Vue 3 å‰ç«¯å¼€å‘æœåŠ¡** | `5173` | HTTP | Vite å¼€å‘æœåŠ¡å™¨ (é»˜è®¤) | `vite.config.ts` |

### æ•°æ®å­˜å‚¨æœåŠ¡

| æœåŠ¡åç§° | ç«¯å£ | åè®® | ç”¨é€” | è¿æ¥é…ç½® |
|---------|------|------|------|----------|
| **MySQL æ•°æ®åº“** | `3306` | TCP | ä¸»æ•°æ®åº“ | `localhost:3306` |
| **Redis ç¼“å­˜** | `6379` | TCP | ç¼“å­˜/ä¼šè¯å­˜å‚¨ | `localhost:6379` |

### ç›‘æ§æœåŠ¡

| æœåŠ¡åç§° | ç«¯å£ | åè®® | ç”¨é€” | é…ç½®æ–‡ä»¶ |
|---------|------|------|------|----------|
| **Prometheus ç›‘æ§** | `9090` | HTTP | æŒ‡æ ‡æ”¶é›† | `prometheus.yml` |
| **Grafana ä»ªè¡¨æ¿** | `3000` | HTTP | å¯è§†åŒ–ç›‘æ§ (é»˜è®¤) | å¤–éƒ¨é…ç½® |

---

## ğŸ—„ï¸ æ•°æ®åº“é…ç½®è¯¦æƒ…

### MySQL æ•°æ®åº“é…ç½®

```yaml
# æ•°æ®åº“è¿æ¥ä¿¡æ¯
Host: localhost
Port: 3306
Database: mambo_code_platform
Username: root
Password: 810271689
```

**è¿æ¥å­—ç¬¦ä¸²:**

```
jdbc:mysql://localhost:3306/mambo_code_platform?useUnicode=true&characterEncoding=UTF-8&serverTimezone=UTC
```

**é‡è¦é…ç½®é¡¹:**
- å­—ç¬¦ç¼–ç : `UTF-8`
- æ—¶åŒºè®¾ç½®: `UTC`
- Unicode æ”¯æŒ: `å¯ç”¨`

### Redis ç¼“å­˜é…ç½®

```yaml
# Redis è¿æ¥ä¿¡æ¯
Host: localhost
Port: 6379
Password: (æ— å¯†ç )
Database: 1
TTL: 3600 ç§’ (1å°æ—¶)
```

```java
// æ³¨æ„ï¼Œæœ¬åœ°ç¯å¢ƒä½¿ç”¨çš„redisæ˜¯æ²¡æœ‰å¯†ç çš„ï¼Œè€Œç”Ÿäº§ç¯å¢ƒä½¿ç”¨çš„redisæ˜¯æœ‰å¯†ç çš„
@Configuration
@ConfigurationProperties(prefix = "spring.data.redis")
@Data
public class RedisChatMemoryStoreConfig {

    private String host;

    private int port;

    private String password;

    private long ttl;

    @Bean
    public RedisChatMemoryStore redisChatMemoryStore() {
        RedisChatMemoryStore.Builder builder = RedisChatMemoryStore.builder()
                .host(host)
                .port(port)
                .password(password)
                .ttl(ttl);
        //æœ¬åœ°ç¯å¢ƒä½¿ç”¨éœ€æ³¨é‡Š
        if (StrUtil.isNotBlank(password)) {
            builder.user("default");
        }
        return builder.build();
    }
}
```



**ç”¨é€”è¯´æ˜:**

- **ä¼šè¯å­˜å‚¨**: Spring Session æ•°æ®æŒä¹…åŒ–
- **LangChain4j èŠå¤©è®°å¿†**: AI å¯¹è¯å†å²ç¼“å­˜
- **åº”ç”¨ç¼“å­˜**: æå‡ç³»ç»Ÿæ€§èƒ½

---

## ğŸŒ å‰åç«¯åœ°å€è§„åˆ’

### åç«¯æœåŠ¡åœ°å€è§„åˆ’

| ç¯å¢ƒ | åŸºç¡€URL | Context Path | å®Œæ•´åœ°å€ |
|------|---------|--------------|----------|
| **å¼€å‘ç¯å¢ƒ** | `http://localhost:8234` | `/api` | `http://localhost:8234/api` |
| **ç”Ÿäº§ç¯å¢ƒ** | `http://your-domain.com:8234` | `/api` | `http://your-domain.com:8234/api` |

### å‰ç«¯æœåŠ¡åœ°å€è§„åˆ’

| ç¯å¢ƒ | åŸºç¡€URL | ä»£ç†é…ç½® | è¯´æ˜ |
|------|---------|----------|------|
| **å¼€å‘ç¯å¢ƒ** | `http://localhost:5173` | ä»£ç†åˆ° `localhost:8234` | Vite å¼€å‘æœåŠ¡å™¨ |
| **ç”Ÿäº§ç¯å¢ƒ** | `http://your-domain.com` | åå‘ä»£ç†é…ç½® | Nginx/Apache é…ç½® |

### API æ¥å£è§„åˆ’

| æ¥å£ç±»å‹ | è·¯å¾„å‰ç¼€ | å®Œæ•´åœ°å€ç¤ºä¾‹ | è¯´æ˜ |
|----------|----------|--------------|------|
| **RESTful API** | `/api/v1` | `http://localhost:8234/api/v1/apps` | ä¸šåŠ¡æ¥å£ |
| **WebSocket** | `/api/ws` | `ws://localhost:8234/api/ws` | å®æ—¶é€šä¿¡ |
| **æ–‡ä»¶ä¸Šä¼ ** | `/api/upload` | `http://localhost:8234/api/upload` | æ–‡ä»¶æœåŠ¡ |
| **å¥åº·æ£€æŸ¥** | `/api/actuator/health` | `http://localhost:8234/api/actuator/health` | ç›‘æ§ç«¯ç‚¹ |

---

## ğŸ“Š ç›‘æ§ä¸å¯è§‚æµ‹æ€§

### Prometheus ç›‘æ§é…ç½®

```yaml
# Prometheus æœåŠ¡åœ°å€
URL: http://localhost:9090
Job Name: mambo-ai-platform
Scrape Path: /api/actuator/prometheus
Target: localhost:8234
Scrape Interval: 10 ç§’
```

### Grafana ä»ªè¡¨æ¿

```yaml
# Grafana æœåŠ¡åœ°å€ (é»˜è®¤)
URL: http://localhost:3000
æ•°æ®æº: Prometheus (http://localhost:9090)
ä»ªè¡¨æ¿é…ç½®: ./grafana/ai_model_grafana_config.json
```

### Spring Boot Actuator ç«¯ç‚¹

| ç«¯ç‚¹ | è·¯å¾„ | ç”¨é€” |
|------|------|------|
| **å¥åº·æ£€æŸ¥** | `/api/actuator/health` | æœåŠ¡å¥åº·çŠ¶æ€ |
| **ä¿¡æ¯ç«¯ç‚¹** | `/api/actuator/info` | åº”ç”¨ä¿¡æ¯ |
| **Prometheus æŒ‡æ ‡** | `/api/actuator/prometheus` | æ€§èƒ½æŒ‡æ ‡ |

---

## ğŸ”— å¤–éƒ¨æœåŠ¡é…ç½®

### é˜¿é‡Œäº‘ OSS å­˜å‚¨

```yaml
# OSS é…ç½®ä¿¡æ¯
Endpoint: https://oss-cn-chengdu.aliyuncs.com
Region: cn-chengdu
Bucket: codeplatform
Access Key ID: LTAI5t8hbFQcqbkNrTCXzPqr
Access Key Secret: [é…ç½®åœ¨ç¯å¢ƒå˜é‡ä¸­]
```

### ModelScope AI æœåŠ¡

```yaml
# AI æ¨¡å‹æœåŠ¡é…ç½®
Base URL: https://api-inference.modelscope.cn/v1/
API Key: ms-b0da3e8e-b54a-4026-9e92-578c202c6e12
è¶…æ—¶è®¾ç½®: 10åˆ†é’Ÿ
æœ€å¤§ä»¤ç‰Œæ•°: 8192-32768 (æ ¹æ®æ¨¡å‹ä¸åŒ)
```

---

## ğŸ”§ å¼€å‘ç¯å¢ƒå¯åŠ¨æŒ‡å—

### åç«¯æœåŠ¡å¯åŠ¨

```bash
# å¯åŠ¨ Spring Boot åº”ç”¨ (ä½¿ç”¨ local é…ç½®)
mvn spring-boot:run -Dspring.profiles.active=local

# åº”ç”¨å°†åœ¨ä»¥ä¸‹åœ°å€å¯åŠ¨:
# http://localhost:8234/api
```

### å‰ç«¯æœåŠ¡å¯åŠ¨

```bash
# è¿›å…¥å‰ç«¯ç›®å½•
cd mambo-ai-platform-frontend

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# å‰ç«¯å°†åœ¨ä»¥ä¸‹åœ°å€å¯åŠ¨:
# http://localhost:5173
```

### å¿…éœ€çš„åŸºç¡€æœåŠ¡

```bash
# å¯åŠ¨ MySQL (ç¡®ä¿è¿è¡Œåœ¨ 3306 ç«¯å£)
sudo systemctl start mysql

# å¯åŠ¨ Redis (ç¡®ä¿è¿è¡Œåœ¨ 6379 ç«¯å£)
sudo systemctl start redis-server

# å¯åŠ¨ Prometheus (å¯é€‰ï¼Œç”¨äºç›‘æ§)
./prometheus --config.file=prometheus.yml
```

---

## ğŸš¨ ç«¯å£å†²çªè§£å†³æ–¹æ¡ˆ

### å¸¸è§ç«¯å£å†²çªåŠè§£å†³æ–¹æ¡ˆ

| ç«¯å£ | å¯èƒ½å†²çªçš„æœåŠ¡ | è§£å†³æ–¹æ¡ˆ |
|------|----------------|----------|
| `8234` | å…¶ä»– Spring Boot åº”ç”¨ | ä¿®æ”¹ `application.yml` ä¸­çš„ `server.port` |
| `5173` | å…¶ä»– Vite åº”ç”¨ | ä¿®æ”¹ `vite.config.ts` æˆ–ä½¿ç”¨ `--port` å‚æ•° |
| `3306` | å…¶ä»– MySQL å®ä¾‹ | ä¿®æ”¹ MySQL é…ç½®æˆ–ä½¿ç”¨ä¸åŒç«¯å£ |
| `6379` | å…¶ä»– Redis å®ä¾‹ | ä¿®æ”¹ Redis é…ç½®æ–‡ä»¶ |
| `9090` | å…¶ä»– Prometheus å®ä¾‹ | ä¿®æ”¹ Prometheus å¯åŠ¨å‚æ•° |

### ç«¯å£æ£€æŸ¥å‘½ä»¤

```bash
# æ£€æŸ¥ç«¯å£å ç”¨æƒ…å†µ (Windows)
netstat -ano | findstr :8234
netstat -ano | findstr :5173
netstat -ano | findstr :3306
netstat -ano | findstr :6379
netstat -ano | findstr :9090

# æ£€æŸ¥ç«¯å£å ç”¨æƒ…å†µ (Linux/Mac)
lsof -i :8234
lsof -i :5173
lsof -i :3306
lsof -i :6379
lsof -i :9090
```

---

## ğŸ” å®‰å…¨é…ç½®è¯´æ˜

### ä¼šè¯é…ç½®

```yaml
# Session å®‰å…¨é…ç½®
Store Type: Redis
Timeout: 30å¤© (2592000ç§’)
Cookie Max Age: 30å¤©
Context Path: /api
```

### æ•°æ®åº“å®‰å…¨

- **MySQL**: ä½¿ç”¨å¼ºå¯†ç ï¼Œé™åˆ¶è¿œç¨‹è®¿é—®
- **Redis**: å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒé…ç½®å¯†ç è®¤è¯
- **OSS**: Access Key é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼Œé¿å…ç¡¬ç¼–ç 

---

## ğŸ“ éƒ¨ç½²æ³¨æ„äº‹é¡¹

### ç”Ÿäº§ç¯å¢ƒé…ç½®

1. **æ•°æ®åº“è¿æ¥æ± **: é…ç½®åˆé€‚çš„è¿æ¥æ± å¤§å°
2. **Redis æŒä¹…åŒ–**: å¯ç”¨ RDB æˆ– AOF æŒä¹…åŒ–
3. **åå‘ä»£ç†**: ä½¿ç”¨ Nginx ä½œä¸ºå‰ç«¯åå‘ä»£ç†
4. **SSL è¯ä¹¦**: ç”Ÿäº§ç¯å¢ƒå¯ç”¨ HTTPS
5. **é˜²ç«å¢™**: ä»…å¼€æ”¾å¿…è¦çš„ç«¯å£

### è´Ÿè½½å‡è¡¡é…ç½®

```nginx
# Nginx é…ç½®ç¤ºä¾‹
upstream backend {
    server localhost:8234;
    # server localhost:8235;  # å¤šå®ä¾‹è´Ÿè½½å‡è¡¡
}

server {
    listen 80;
    server_name your-domain.com;

    location /api/ {
        proxy_pass http://backend;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }

    location / {
        root /path/to/frontend/dist;
        try_files $uri $uri/ /index.html;
    }
}
```

---

## ğŸ“ è”ç³»ä¸ç»´æŠ¤

- **é¡¹ç›®åç§°**: Mambo AI Platform
- **æŠ€æœ¯æ ˆ**: Spring Boot 3 + Vue 3 + LangChain4j
- **æ–‡æ¡£æ›´æ–°**: è¯·åœ¨é…ç½®å˜æ›´æ—¶åŠæ—¶æ›´æ–°æœ¬æ–‡æ¡£
- **é…ç½®æ–‡ä»¶ä½ç½®**:
  - åç«¯: `src/main/resources/application*.yml`
  - å‰ç«¯: `vite.config.ts`
  - ç›‘æ§: `prometheus.yml`

---

## ğŸ“ ç»´æŠ¤è®°å½•

| æ—¥æœŸ | ä¿®æ”¹å†…å®¹ | è´£ä»»äºº |
|------|----------|--------|
| 2025-08-19 | åˆ›å»ºç«¯å£è§„åˆ’æ–‡æ¡£ | System |
| 2025-08-19 | ä¿®å¤MonitorContext NPEé”™è¯¯ | System |
| 2025-08-19 | æ·»åŠ JVMä¼˜åŒ–é…ç½® | System |
| 2025-08-19 | å®Œå–„äº‘æœåŠ¡å™¨éƒ¨ç½²ä¿¡æ¯ | System |
| 2025-08-19 | **ä¿®å¤HTTPè¿æ¥æ–­å¼€é”™è¯¯** | System |
| 2025-08-19 | **ä¿®å¤SSEæµå¤„ç†é”™è¯¯** | System |
| 2025-08-19 | **æ·»åŠ ç›‘æ§ä¸Šä¸‹æ–‡è‡ªåŠ¨ç®¡ç†** | System |
| 2025-08-19 | **ä¼˜åŒ–LangChain4j HTTPé…ç½®** | System |

---

*æœ€åæ›´æ–°: 2025-08-19 13:30*
